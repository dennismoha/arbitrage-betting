<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: pages/Arbitrage.tsx</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: pages/Arbitrage.tsx</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import  { useState } from "react"; 
import { v4 as uuidv4 } from "uuid";
import useArbitrageCalculator from "@hooks/useArbitrageCalculators";

const Arbitrage = () => {
  const {  results, setOddsHandler,} = useArbitrageCalculator();

  // Initial bet object structure
  const initialBet = {
    betId: uuidv4(),
    odds: 0, // Initial odds for each bet
  };

  // State to hold data: bets array and totalStake
  const [data, setData] = useState({
    bets: [initialBet],
    totalStake: 0,
  });

  /**
   * Function to add a new bet
   */
  const addBet = () => {
    const newBet = { betId: uuidv4(), odds: 0 };
    setData((prevData) => ({
      ...prevData,
      bets: [...prevData.bets, newBet],
    }));
  };

  /**
   * Function to clear all bets except the initial one and reset totalStake
   */
  const clearBets = () => {
    setData({
      bets: [initialBet],
      totalStake: 0,
    });
  };

  /**
   * Function to handle odds input change
   * @param {string} betId - The ID of the bet to update
   * @param {number} newOdds - The new odds value
   */
  const handleOddsChange = (betId: string, newOdds:number) => {
    setData((prevData) => ({
      ...prevData,
      bets: prevData.bets.map((bet) =>
        bet.betId === betId ? { ...bet, odds: newOdds } : bet
      ),
    }));
  };

  /**
   * Function to handle totalStake input change
   * @param {number} newStake - The new total stake value
   */
  const handleTotalStakeChange = (newStake: number) => {
    setData((prevData) => ({
      ...prevData,
      totalStake: newStake,
    }));
  };

  /**
   * Handle form submission
   * @param {React.FormEvent} e - The form event
   */
  const handleSubmit = (e: React.FormEvent) => {
    e.preventDefault();
    console.log("Submitting Bets:", data.bets);
    console.log("Submitting Total Stake:", data.totalStake);
    setOddsHandler(data);
    // calculateArbitrage(); // Assuming this uses the updated state internally
  };

  return (
    &lt;>
      &lt;h1>Arbitrage Betting Form&lt;/h1>
      &lt;hr />
      &lt;div
        style={{
          display: "flex",
          flexDirection: "row",
          justifyContent: "space-evenly",
        }}
      >
        {/* Betting Form Section */}
        &lt;div>
          &lt;form onSubmit={handleSubmit}>
            {/* Render each bet */}
            {data.bets.map((bet, betIndex) => (
              &lt;div key={bet.betId} style={{ marginBottom: "20px" }}>
                &lt;span style={{ marginRight: "10px" }}>Bet {betIndex + 1}:&lt;/span>
                &lt;input
                  type="number"
                  step="0.01"
                  value={bet.odds == 0 ? '': bet.odds}
                  onChange={(e) =>
                    handleOddsChange(bet.betId, parseFloat(e.target.value))
                  }
                  placeholder="Enter odds"
                  required
                />
              &lt;/div>
            ))}

            {/* Input for Total Stake */}
            &lt;div style={{ marginBottom: "20px" }}>
              &lt;span style={{ marginRight: "10px" }}>Total Stake:&lt;/span>
              &lt;input
                type="number"
                step="0.01"
                value={data.totalStake === 0 ? "" : data.totalStake}
                onChange={(e) =>
                  handleTotalStakeChange(parseFloat(e.target.value))
                }
                placeholder="Enter total stake"
                required
              />
            &lt;/div>

            {/* Action Buttons */}
            &lt;div>
              &lt;button type="button" onClick={addBet} style={{ marginRight: "10px" }}>
                Add Bet
              &lt;/button>
              &lt;button type="submit" style={{ marginRight: "10px" }}>
                Submit
              &lt;/button>
              &lt;button type="button" onClick={clearBets}>
                Clear Bets
              &lt;/button>
            &lt;/div>
          &lt;/form>
        &lt;/div>

        {/* Results Section */}
        &lt;div>
          {results &amp;&amp; (
            &lt;div>
              &lt;h2>Results&lt;/h2>
              &lt;p>Arbitrage Percentage: {results.arbPercentage.toFixed(3)}&lt;/p>
              {results.arbPercentage &lt; 1 ? (
                &lt;>
             
                  &lt;p>Stake for Outcome A: ${JSON.stringify(results)}&lt;/p>
                  {/* &lt;p>Stake for Outcome B: ${results.stake}&lt;/p>
                  &lt;p>Stake for Outcome C: ${results.stake}&lt;/p> */}
                  {/* &lt;p>Guaranteed Profit: ${results.profit.toFixed(2)}&lt;/p> */}
                &lt;/>
              ) : (
                &lt;p>No arbitrage opportunity.&lt;/p>
              )}
            &lt;/div>
          )}
        &lt;/div>
      &lt;/div>
    &lt;/>
  );
};

export default Arbitrage;
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#CartesianProduct">CartesianProduct</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.3</a> on Sat Sep 21 2024 12:30:35 GMT+0300 (East Africa Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
